{% extends "layout-admin.html.twig" %}

{% block header %}
{{ parent() }}
{% endblock %}

{% block main %}
    <h1> page pour mettre à jour un bien </h1>
    <main class="container py-5">
        <h1>
            Mettre à jour les informations de la propriété
        </h1>
        <p>Propriétaire du bien: {{ propertyById.owner.firstName ~ " " ~ propertyById.owner.lastName }}</p>
        <p>Locataire du bien: {{ propertyById.tenant.firstName ~ " " ~ propertyById.tenant.lastName }}</p>

        <form action='index.php?route=check-update-property' method="POST" enctype="multipart/form-data" class="mt-5">
            <input type="hidden" name="csrf-token" id="csrf-token" value="{{ session }}" />
            <input type="hidden" id="propertyId" name="propertyId" value="{{ propertyById.id }}" />
            <fieldset class="my-1">
                {% if propertyById.medias is empty %}
                <figure>
                    <img src="../assets/img/no-vignette.svg" class="img-fluid img-thumbnail" alt="...">
                  </figure>
                  {% else %}
                  {% for key, media in propertyById.medias  %}
                  <figure>
                    <img src='{{ "../upload/" ~ media.url }}' class="img-fluid img-thumbnail" alt="...">
                    <figcaption>{{ media.url }}</figcaption>
                  </figure>
                  <label for="formFile" class="form-label">Default file input example</label>
                  <input class="form-control" type="file" name="formFile_{{ key }}" id="formFile">
                 
                {% endfor %} 
                {% endif %}
            </fieldset>
            <fieldset class="my-1">
                <label for="salesPrice" class="form-label">
                    Prix de vente
                </label>
                <input type="number" name="salesPrice" id="salesPrice" class="form-control" value="{{ propertyById.salesPrice }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="rent" class="form-label">
                    Loyer
                </label>
                <input type="number" name="rent" id="rent" class="form-control" value="{{ propertyById.rent }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="Charge" class="form-label">
                    Charge
                </label>
                <input type="number" name="Charge" id="Charge" class="form-control" value="{{ propertyById.Charge }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="rentCharge" class="form-label">
                    Loyer + Charge
                </label>
                <input type="number" name="rentCharge" id="rentCharge" class="form-control" value="{{ propertyById.rentCharge }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="securityDeposit" class="form-label">
                    Dépôt de garantie
                </label>
                <input type="number" name="securityDeposit" id="securityDeposit" class="form-control" value="{{ propertyById.securityDeposit }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="agencyFeesRent" class="form-label">
                    Frais d'agence
                </label>
                <input type="number" name="agencyFeesRent" id="agencyFeesRent" class="form-control" value="{{ propertyById.agencyFeesRent }}"/>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="energyDiagnostics" name="energyDiagnostics" aria-label="Floating label select example">
                    <option selected>{{ propertyById.energyDiagnostics.note }}</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                </select>
                <label for="energyDiagnostics">Note diagnostique énergétique</label>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="greenhouseGasEmissionIndices" name="greenhouseGasEmissionIndices" aria-label="Floating label select example">
                    <option selected>{{ propertyById.greenhouseGasEmissionIndices.note }}</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                    <option value="F">F</option>
                    <option value="G">G</option>
                </select>
                <label for="greenhouseGasEmissionIndices">Note emisssion gaz à effet de serre</label>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="statusProperty" name="statusProperty" aria-label="Floating label select example">
                    <option selected>{{ propertyById.statusProperty.statusName }}</option>
                    <option value="A LOUER">A LOUER</option>
                    <option value="LOUE">LOUE</option>
                    <option value="A VENDRE">A VENDRE</option>
                    <option value="VENDU">VENDU</option>
                    <option value="VACANCE LOCATIVE">VACANCE LOCATIVE</option>
                </select>
                <label for="statusProperty">Status de la propriété</label>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="state" name="state" aria-label="Floating label select example">
                    <option selected>{{ propertyById.state.stateName }}</option>
                    <option value="Neuf">Neuf</option>
                    <option value="Ancien">Ancien</option>
                    <option value="Rénové">Rénové</option>       
                </select>
                <label for="state">Etat de la propriété</label>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="type" name="type" aria-label="Floating label select example">
                    <option selected>{{ propertyById.type.typeName }}</option>
                    <option value="Neuf">Appartements</option>
                    <option value="Ancien">Maisons</option>
                    <option value="Rénové">Stationnements</option>     
                    <option value="Ancien">Terrains</option>
                    <option value="Rénové">Immeubles</option>     
                </select>
                <label for="type">Types de propriété</label>
            </fieldset>
            <fieldset class="my-1">
                <label for="availabilityDate" class="form-label">
                    Date de disponnibilité
                </label>
                <input type="date" name="availabilityDate" id="availabilityDate" class="form-control" value="{{ propertyById.availabilityDate }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="title" class="form-label">
                    Adresse
                </label>
                <input type="text" name="title" id="title" class="form-control" value="{{ propertyById.title }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="rooms" class="form-label">
                    Nombre de pièces
                </label>
                <input type="number" name="rooms" id="rooms" class="form-control" value="{{ propertyById.rooms }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="surface" class="form-label">
                    Superficie
                </label>
                <input type="number" name="surface" id="surface" class="form-control" value="{{ propertyById.surface }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="description" class="form-label">
                    Description
                </label>
                <input type="text" name="description" id="description" class="form-control" value="{{ propertyById.description }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="city" class="form-label">
                    Ville
                </label>
                <input type="text" name="city" id="city" class="form-control" value="{{ propertyById.location.city }}"/>
            </fieldset>
            <fieldset class="my-1">
                <label for="district" class="form-label">
                    Quartier
                </label>
                <input type="text" name="district" id="district" class="form-control" value="{{ propertyById.location.district }}"/>
            </fieldset>
            <fieldset class="my-1 form-floating">
                <select class="form-select" id="rentalManagement" name="rentalManagement" aria-label="Floating label select example">
                    <option selected>{{ propertyById.rentalManagement.management }}</option>
                    <option value="OUI">OUI</option>
                    <option value="NON">NON</option>
                </select>
                <label for="rentalManagement">Gestion locative</label>
            </fieldset>
            <button type="submit" class="mt-3 btn btn-primary">Mettre à jour</button>
            <a class="btn btn-danger" href="index.php?route=delete-user&id={{ userById.id }}" role="button">Supprimer le bien</a>
        </form>

   
</main>
    
{% endblock %}

{% block footer %}
{% endblock %}

{% block script %}
{{ parent() }}
{% endblock %}